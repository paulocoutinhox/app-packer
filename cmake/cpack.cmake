# CPack configuration for packaging
set(CPACK_PACKAGE_NAME "MyApp")
set(CPACK_PACKAGE_VENDOR "Your Company")
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "My Application")
set(CPACK_PACKAGE_VERSION ${PROJECT_VERSION})
set(CPACK_PACKAGE_INSTALL_DIRECTORY "MyApp")
set(CPACK_PACKAGE_FILE_NAME "MyApp")

# Only package the Runtime component
set(CPACK_COMPONENTS_ALL Runtime)
set(CPACK_COMPONENT_RUNTIME_DISPLAY_NAME "MyApp")
set(CPACK_COMPONENT_RUNTIME_DESCRIPTION "MyApp Application")
set(CPACK_COMPONENT_RUNTIME_REQUIRED TRUE)

if(APPLE)
  set(CPACK_GENERATOR "DragNDrop")
  set(CPACK_DMG_VOLUME_NAME "MyApp")
  set(CPACK_DMG_FORMAT "UDZO")
  set(CPACK_DMG_BACKGROUND_IMAGE "${CMAKE_CURRENT_SOURCE_DIR}/resources/macos/background.png")
  set(CPACK_DMG_WINDOW_BACKGROUND_COLOR "#f0f0f0")
  set(CPACK_DMG_WINDOW_POSITION_X 400)
  set(CPACK_DMG_WINDOW_POSITION_Y 100)
  set(CPACK_DMG_WINDOW_SIZE_WIDTH 520)
  set(CPACK_DMG_WINDOW_SIZE_HEIGHT 340)
  set(CPACK_DMG_ICON_SIZE 72)
  set(CPACK_DMG_APP_ICON_POSITION_X 160)
  set(CPACK_DMG_APP_ICON_POSITION_Y 205)
  set(CPACK_DMG_APPLICATIONS_FOLDER_POSITION_X 360)
  set(CPACK_DMG_APPLICATIONS_FOLDER_POSITION_Y 205)
elseif(WIN32)
  set(CPACK_GENERATOR "NSIS")
  set(CPACK_NSIS_PACKAGE_NAME "MyApp")
  set(CPACK_NSIS_DISPLAY_NAME "MyApp")
  set(CPACK_NSIS_ENABLE_UNINSTALL_BEFORE_INSTALL ON)
  set(CPACK_NSIS_MUI_ICON "${CMAKE_CURRENT_SOURCE_DIR}/resources/windows/icon.ico")
  set(CPACK_NSIS_MUI_UNIICON "${CMAKE_CURRENT_SOURCE_DIR}/resources/windows/icon.ico")
  set(CPACK_NSIS_MENU_LINKS
    "https://github.com/paulocoutinhox/app-packer" "Website"
    "https://github.com/paulocoutinhox/app-packer/issues" "Report Issues"
  )
else()
  set(CPACK_GENERATOR "DEB")
  set(CPACK_DEBIAN_PACKAGE_MAINTAINER "Your Name <your.email@example.com>")
  set(CPACK_DEBIAN_PACKAGE_SECTION "Applications")
endif()

include(CPack)
